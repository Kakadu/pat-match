(env
  (dev
    (flags (-strict-sequence -strict-formats -short-paths -keep-locs -w -3-9-32))))

;(library
  ;(name vcore)
  ;(modules Main)
  ;(libraries ocanren )
  ;(flags (-strict-sequence -strict-formats -short-paths -keep-locs -open Base -w -3-9+32))
  ;(preprocess (pps GT.ppx ppx_import))
;)

(executable
  (name main)
  (modules main)
  (flags (-rectypes))
  (libraries ocanren)
  (preprocess (pps ocanren.ppx GT.ppx))
)


(rule
 (targets work.ml)
 (deps    work.ml2mk.ml)
 (action  (run noCanren work.ml2mk.ml -o %{targets})))

(executable
  (name main2)
  (modules main2 work)
  (flags (-rectypes))
  (libraries ocanren ocanren.tester)
  (preprocess (pps ocanren.ppx GT.ppx))
)
