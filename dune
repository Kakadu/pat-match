(env
 (dev
  (flags
   (:standard -w -3-9-32-27-39))))

(library
 (name helper)
 (public_name helper)
 (modules helper)
 (preprocess
  (pps OCanren-ppx.ppx_repr OCanren-ppx.ppx_fresh GT.ppx GT.syntax.map
    GT.syntax.fmt GT.syntax.compare))
 (flags (-rectypes))
 (libraries OCanren unix))

(library
 (name mytester)
 (modules mytester)
 (preprocess
  (pps OCanren-ppx.ppx_repr OCanren-ppx.ppx_fresh GT.ppx GT.syntax.map
    GT.syntax.fmt GT.syntax.compare))
 (flags (-rectypes))
 (libraries mtime.clock.os OCanren))

(library
 (name mybench)
 (modules mybench)
 (preprocess
  (pps OCanren-ppx.ppx_repr OCanren-ppx.ppx_fresh GT.ppx GT.syntax.map
    GT.syntax.fmt GT.syntax.compare))
 ;(flags      ())
 (libraries GT mtime.clock.os))

(executable
 (name main)
 (modules main)
 (flags (-rectypes))
 (libraries ocanren)
 (preprocess
  (pps OCanren-ppx.ppx_repr OCanren-ppx.ppx_fresh GT.ppx GT.syntax.map
    GT.syntax.fmt GT.syntax.compare)))

; (library
;  (name helper)
;  (public_name helper)
;  (modules helper)
;  (preprocess
;   (action
;    (run %{project_root}/pp_ppx/ppx_rewriter.exe %{input-file})))
;  (flags (-rectypes))
;  (libraries OCanren unix))

; (library
;  (name mytester)
;  (modules mytester)
;  (preprocess
;   (action
;    (run %{project_root}/pp_ppx/ppx_rewriter.exe %{input-file})))
;  (flags (-rectypes))
;  (libraries mtime.clock.os OCanren))

; (library
;  (name mybench)
;  (modules mybench)
;  (preprocess
;   (action
;    (run %{project_root}/pp_ppx/ppx_rewriter.exe %{input-file})))
;  (libraries GT mtime.clock.os))
