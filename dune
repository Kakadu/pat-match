(env
 (dev
  (flags
   (-strict-sequence -short-paths -strict-formats -short-paths -keep-locs -w
     -3-9-32))))

(library
 (name helper)
 (public_name helper)
 (modules helper)
 (preprocess
  (action
   (run %{project_root}/pp_ppx/ppx_rewriter.exe %{input-file})))
 (flags (-rectypes))
 (libraries OCanren unix))

(library
 (name mytester)
 (modules mytester)
 (preprocess
  (action
   (run %{project_root}/pp_ppx/ppx_rewriter.exe %{input-file})))
 (flags (-rectypes))
 (libraries mtime.clock.os OCanren))

(library
 (name mybench)
 (modules mybench)
 (preprocess
  (action
   (run %{project_root}/pp_ppx/ppx_rewriter.exe %{input-file})))
 (libraries GT mtime.clock.os))

(rule
 (targets work.ml)
 (deps work.ml2mk.ml)
 (action
  (run noCanren work.ml2mk.ml -o %{targets})))
